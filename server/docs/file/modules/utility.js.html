<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">modules/utility.js | server</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Data collection and processing server"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="server"><meta property="twitter:description" content="Data collection and processing server"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/ancara22/pi-server"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/modules/cortex.js~Cortex.html">Cortex</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-concatinateWavFiles">concatinateWavFiles</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-detectExterienceSampling">detectExterienceSampling</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-insertToJSON">insertToJSON</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-sendAudioToAWSS3">sendAudioToAWSS3</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-cleanCSVFile">cleanCSVFile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-cleanOldRowData">cleanOldRowData</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-emptyAllFiles">emptyAllFiles</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-removeStreamFiles">removeStreamFiles</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-insertGSRData">insertGSRData</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-predictGSREmotion">predictGSREmotion</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-processGSRoutput">processGSRoutput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-rigControl">rigControl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-resetTimer">resetTimer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-extractTimestamp">extractTimestamp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getAllEEGFilesContent">getAllEEGFilesContent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getJSONLFileContent">getJSONLFileContent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getTheHash">getTheHash</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-insertDataToFinalFile">insertDataToFinalFile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-readJSONFile">readJSONFile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-runImageProcessor">runImageProcessor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-runSessionFileUpdatingInterval">runSessionFileUpdatingInterval</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-saveData">saveData</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-writeJSONFile">writeJSONFile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-webClientRoutes">webClientRoutes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-config">config</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-serverRoutes">serverRoutes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-APP_CONFIG">APP_CONFIG</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EXPERIENCE_CONFIG">EXPERIENCE_CONFIG</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FILE_PATHS">FILE_PATHS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RIG_CONFIG">RIG_CONFIG</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SERVER_CONFIG">SERVER_CONFIG</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">modules/utility.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import multer, { diskStorage } from &apos;multer&apos;;
import fs from &apos;fs&apos;;
import { exec } from &apos;child_process&apos;;
import Papa from &apos;papaparse&apos;;
import crypto from &apos;crypto&apos;;
import { FILE_PATHS, SERVER_CONFIG, APP_CONFIG } from &quot;./server_settings.js&quot;;
import { emptyAllFiles } from &quot;./file_cleaners.js&quot;;

/**
 * Middleware to handle file uploads and save them to a specified folder.
 *
 * @function
 * @param {string} folder - The folder where the data will be stored.
 * @param {string} fileType - The type of file being uploaded.
 * @returns {Function} Middleware function for handling file uploads.
 * @throws {Error} Throws an error if there is an issue with file storage.
 *
 * @example
 * const uploadMiddleware = saveData(&apos;uploads&apos;, &apos;image&apos;);
 * app.post(&apos;/upload&apos;, uploadMiddleware, (req, res) =&gt; {
 *   // Handle file upload
 * });
 */
function saveData(folder, fileType) {
    const storage = diskStorage({
        destination: (r, f, callback) =&gt; {
            callback(null, `data/${folder}/`);
        },

        filename: (r, file, callback) =&gt; {
            callback(null, file.originalname);
        }
    });

    const upload = multer({
        storage: storage
    });

    return upload.single(fileType);
}

/**
 * Run the image processor Python script.
 *
 * @function
 * @memberof module:utility
 * @name runImageProcessor
 * @throws {Error} If there is an error during execution.
 * @returns {void}
 * @example
 * runImageProcessor();
 */
function runImageProcessor() {
    exec(APP_CONFIG.IMAGE_PROCESSOR_COMMAND, (error, stdout, stderr) =&gt; {
        if (error) {
            console.error(`Error: ${error.message}`);
            throw error; //Throw an error to indicate failure
        }
        if (stderr) {
            console.error(`Stderr: ${stderr}`);
            return;
        }
        console.log(`Output: ${stdout}`);
    });
}


////////////////////////////////////////////////////////////////////////////
//File handlers
////////////////////////////////////////////////////////////////////////////

/**
 * Read the content of a JSON file and parse it into a JavaScript object.
 *
 * @function
 * @memberof module:utility
 * @name readJSONFile
 * @param {string} filePath - The path to the JSON file.
 * @param {Function} [callback=() =&gt; {}] - A callback function to be executed after reading the file.
 * @throws {Error} If there is an error reading or parsing the JSON file.
 * @returns {void}
 * @example
 * readJSONFile(&apos;/path/to/file.json&apos;, (dataObject) =&gt; {
 *   console.log(&apos;Read data:&apos;, dataObject);
 * });
 */
function readJSONFile(filePath, callback = () =&gt; {}) {
    try {
        fs.readFile(filePath, &apos;utf8&apos;, (err, data) =&gt; {
            if (err) {
                console.error(&apos;Error reading JSON file:&apos;, err);
                callback(err, null);
                return;
            }

            const dataObject = JSON.parse(data || &apos;[]&apos;);
            callback(dataObject);
        });
    } catch (err) {
        console.log(&apos;Error reading file: &apos;, err)
    }
}

/**
 * Write data to a JSON file, formatting the JSON content for readability.
 *
 * @function
 * @memberof module:utility
 * @name writeJSONFile
 * @param {string} filePath - The path to the JSON file.
 * @param {Object} data - The data to be written to the file.
 * @throws {Error} If there is an error writing the JSON file.
 * @returns {void}
 * @example
 * const jsonData = { key: &apos;value&apos; };
 * writeJSONFile(&apos;/path/to/file.json&apos;, jsonData);
 */
function writeJSONFile(filePath, data) {
    try {
        fs.writeFileSync(filePath, JSON.stringify(data, null, 4), &apos;utf8&apos;);
    } catch (error) {
        console.error(`Error writing JSON file (${filePath}):`, error);
    }
}



////////////////////////////////////////////////////////////////////////////
//FORMAT THE DATA, MERGE AND SAVE TO A FILE
////////////////////////////////////////////////////////////////////////////

/**
 * Get and convert image data from the data file.
 *
 * @function
 * @memberof module:utility
 * @name convertImageData
 * @returns {Array&lt;Object&gt;} An array of objects containing converted image data.
 * @example
 * const convertedData = convertImageData();
 * console.log(convertedData);
 */
function convertImageData() {
    let imageData = getImages(),
        result = [];

    //Format images data
    imageData.forEach(row =&gt; {
        let imageName = row.image,
            timestamp = extractTimestamp(imageName);

        let data = {
            [timestamp]: imageName,
            text: row.text
        }

        let exist = result.find(img =&gt; img.text === data.text);
        if (timestamp != null &amp;&amp; !exist) result.push(data);
    })

    return result;
}
/**
 * Convert audio data and extract audio text, detected experience, and sentiments.
 *
 * @function
 * @memberof module:utility
 * @name convertAudioData
 * @param {Array&lt;Object&gt;} audioData - Array of audio data objects.
 * @returns {Object} Object containing audio data, experience data, and sentiments.
 * @example
 * const audioData = [...]; // Your audio data array
 * const { audioObject, experienceObject, sentiments } = convertAudioData(audioData);
 * console.log(audioObject, experienceObject, sentiments);
 */
function convertAudioData(audioData) {
    let audioObject = [],
        experienceObject = [],
        sentiments = [];

    audioData.forEach(audioSection =&gt; {
        let data = {
            [audioSection.timestamp]: audioSection.audio_file,
            text: audioSection.text,
            sentiment: audioSection.text_emotion
        }

        let des = {
            [audioSection.timestamp]: audioSection.audio_file,
            text: audioSection.experienceDetected,
        }

        sentiments.push({
            [audioSection.timestamp]: audioSection.audio_file,
            sentiment: audioSection.text_emotion
        })

        experienceObject.push(des);
        audioObject.push(data);

    });

    experienceObject = experienceObject.filter(el =&gt; el.text != null);

    return {
        audioObject,
        experienceObject,
        sentiments
    };
}


/**
 * Convert GSR (Galvanic Skin Response) data and update the sentiments array.
 *
 * @function
 * @memberof module:utility
 * @name convertGSRData
 * @param {Array&lt;Object&gt;} gsrData - Array of GSR data objects.
 * @param {Array&lt;Object&gt;} sentiments - Array of sentiment data to be updated.
 * @returns {Array&lt;Object&gt;} Array of formatted GSR data objects.
 * @example
 * const gsrData = [...]; // Your GSR data array
 * const sentiments = [...]; // Your sentiments array
 * const gsrObject = convertGSRData(gsrData, sentiments);
 * console.log(gsrObject);
 */
function convertGSRData(gsrData, sentiments) {
    let gsrObject = [];

    //Format the GSR datax
    gsrData.forEach(gsrSection =&gt; {
        let data = {
            start: gsrSection.startTime,
            end: gsrSection.endTime,
            section: gsrSection.gsr_section,
            sentiment: gsrSection.emotion_state
        }

        sentiments.push({
            [gsrSection.startTime]: gsrSection.endTime,
            sentiment: gsrSection.emotion_state
        })

        gsrObject.push(data);
    })

    return gsrObject;
}


/**
 * Create the final output file by merging and formatting various data sources.
 *
 * @function
 * @memberof module:utility
 * @name insertDataToFinalFile
 * @example
 * insertDataToFinalFile();
 */
function insertDataToFinalFile() {
    checkSessionFilePeriod(() =&gt; {
        //Read Audio text data
        readJSONFile(FILE_PATHS.AUDIO_TEXT_FILE_PATH, (audioData) =&gt; {
            let imageObject = convertImageData(); //replace the code bellow

            let {
                audioObject,
                experienceObject,
                sentiments
            } = convertAudioData(audioData);
            let eegObject = getAllEEGFilesContent();

            //Read GSR data
            readJSONFile(FILE_PATHS.GSR_SECTIONS_JSON_PATH, (gsrData) =&gt; {
                let gsrObject = convertGSRData(gsrData, sentiments);

                //Read user data file
                readJSONFile(FILE_PATHS.USER_FILE_PATH, (user) =&gt; {
                    //Create the final data format
                    const merged = {
                        head: {
                            [user.sessionStart]: user.sessionFile,
                            user: user.currentUser,
                            version: user.version,
                            duration: user.duration,
                            blockchain: user.blockchain
                        },
                        data: {
                            gsr: gsrObject,
                            eeg: eegObject,
                            audio: audioObject,
                            des: experienceObject,
                            sentiment: sentiments,
                            image: imageObject
                        }
                    }

                    writeJSONFile(SERVER_CONFIG.current_session_file, merged); // Write the merged data to a new file
                    console.log(`Merged data written to ${SERVER_CONFIG.current_session_file}`);
                })
            })
        })
    })
}


/**
 * Extract the timestamp from a string.
 *
 * @function
 * @memberof module:utility
 * @name extractTimestamp
 * @param {string} fromString - The input string containing the timestamp.
 * @returns {number|null} Extracted timestamp as a number or null if not found.
 * @example
 * const timestamp = extractTimestamp(&quot;Day 1: 12345&quot;);
 * console.log(timestamp); // Output: 12345
 */
function extractTimestamp(fromString) {
    let match = fromString.match(/(\d+)/);

    return match ? parseInt(match[0]) : null;
}


/**
 * Runs the final file content update at regular intervals.
 *
 * @function
 */
function runSessionFileUpdatingInterval() {
    setInterval(() =&gt; insertDataToFinalFile(), 1 * 60 * 100);
}


/**
 * Update the session file when the time is more than defined time minutes.
 *
 * @function
 * @param {Function} callback - Callback function to be executed after the update.
 */
function checkSessionFilePeriod(callback) {
    try {
        //Read user.json file
        readJSONFile(FILE_PATHS.USER_FILE_PATH, (userObject) =&gt; {
            let { sessionStart, sessionFile } = userObject; //Extract sessionStart and sessionFile

            //Calculate the difference between current time and sessionStart in milliseconds
            const currentTime = new Date().getTime();
            const timeDifference = currentTime - sessionStart;

            let shouldCreateNewSession = () =&gt; {
                return (sessionStart == &apos;&apos; || sessionFile == &apos;&apos; || timeDifference &gt; SERVER_CONFIG.OUTPUT_LENGTH * 60 * 1000)
            }

            //Check if the difference is more than minutes (minutes * 60 * 1000 milliseconds)
            if (shouldCreateNewSession) {
                createNewSession(currentTime, userObject, callback);
            } else {
                SERVER_CONFIG.current_session_file = FILE_PATHS.SESSION_FOLDER + sessionFile; //Difference is less than setted time
                callback();

                console.log(&quot;Session Updated!&quot;)
            }
        });
    } catch (error) {
        console.error(&apos;Error updating the session file:&apos;, error);
    }
}


/**
 * Creates a new session.
 *
 * @function
 * @param {number} currentTime - Current time in milliseconds.
 * @param {object} userObject - User object containing session details.
 * @param {Function} callback - Callback function to be executed after the creation.
 */
function createNewSession(currentTime, userObject, callback) {
    getTheHash((hash) =&gt; {
        //Create a new JSON file with the name &quot;session&quot; + current timestamp
        const newFileName = `session_${currentTime}.json`;
        const newSessionFilename = FILE_PATHS.SESSION_FOLDER + newFileName;
        writeJSONFile(newSessionFilename, {});

        //Assign the created filename to current_session file
        SERVER_CONFIG.current_session_file = newSessionFilename;
        console.log(`New session file created: ${SERVER_CONFIG.current_session_file}`);

        sessionStart = currentTime;
        sessionFile = newFileName;

        let blockchain = {
            authority: &quot;Evolwe&quot;,
            hash: hash
        };

        let concatinatedOBJ = Object.assign({}, userObject, {
            sessionStart,
            sessionFile,
            blockchain
        });

        writeJSONFile(FILE_PATHS.USER_FILE_PATH, concatinatedOBJ);
        emptyAllFiles();
        callback();
    });
}


/**
 * Get image data from a CSV file.
 *
 * @function
 * @returns {Array} Parsed data containing image information.
 * @throws {Error} Throws an error if there&apos;s an issue reading or parsing the CSV file.
 */
function getImages() {
    const imageCsv = fs.readFileSync(FILE_PATHS.IMAGE_TEXT_FILE_PATH, &apos;utf8&apos;); //Read the image text csv file
    const parsedData = Papa.parse(imageCsv, {
        header: true
    }); //Parse CSV data    

    return parsedData.data;
}


/**
 * Hash the given data using SHA-256 algorithm.
 *
 * @function
 * @param {Object} data - The data to be hashed.
 * @returns {string} The SHA-256 hash of the data.
 */
function hashTheData(data) {
    // Convert data to JSON string
    let jsonData = JSON.stringify(data);

    // Create a SHA-256 hash of the JSON string
    const hash = crypto.createHash(&apos;sha256&apos;).update(jsonData).digest(&apos;hex&apos;);

    return hash;
}


/**
 * Get the hash from the cloud.
 *
 * @function
 * @param {Function} callback - The callback function to handle the retrieved hash.
 * @throws Will throw an error if there is an issue reading JSON files or making the API request.
 */
function getTheHash(callback) {
    // Read user.json file
    readJSONFile(FILE_PATHS.USER_FILE_PATH, (userObject) =&gt; {
        let { sessionFile, currentUser } = userObject;

        // Read session file
        readJSONFile(`./data/session_files/${sessionFile}`, (session) =&gt; {
            // Hash the session data
            let hash = hashTheData(session);

            // Make API request to get the rehashed value
            fetch(&quot;https://olkjccryjj.execute-api.eu-west-2.amazonaws.com/prod/rehash&quot;, {
                method: &quot;POST&quot;,
                headers: {
                    &apos;Content-Type&apos;: &apos;application/json&apos;
                },
                body: JSON.stringify({
                    hash: hash,
                    user: currentUser
                })
            }).then(res =&gt; res.json()).then(data =&gt; {
                // Invoke the callback with the rehashed value
                callback(data.rehashedValue);
            })
        })
    })
}


/**
 * Read the JSONL file and return the content and session IDs.
 *
 * @function
 * @param {string} filePath - The path to the JSONL file.
 * @returns {Object} An object containing the converted data and session IDs.
 * @throws Will throw an error if there is an issue reading the file or parsing JSON.
 */
function getJSONLFileContent(filePath) {
    let sids = [],
        previeusSession = undefined;

    try {
        //Convert Data
        const fileContent = fs.readFileSync(filePath, &apos;utf-8&apos;).split(&apos;\n&apos;).filter(line =&gt; line.trim() !== &apos;&apos;)
        const convertedData = fileContent.map(item =&gt; JSON.parse(item));

        convertedData.forEach(element =&gt; {
            if (previeusSession == undefined) {
                previeusSession = element.sid;
                sids.push(previeusSession);
            } else if (element.sid != previeusSession) {
                previeusSession = element.sid;
                sids.push(previeusSession);
            }

            delete element.sid;
        });

        return {
            convertedData,
            sids
        };

    } catch (error) {
        console.log(&apos;Error reading JSONL file: &apos;, error);
        return {
            convertedData: [],
            sids: []
        };
    }
}


/**
 * Get content from all EEG files and organize it by type.
 *
 * @function
 * @returns {Object} An object containing EEG data organized by type and unique session IDs.
 * @throws Will throw an error if there is an issue reading the files or parsing JSON.
 */
function getAllEEGFilesContent() {
    let sessionIDs = [];

    let finalEEGdata = {
        sessionIds: [],
        expression: [],
        performance: [],
        sensors: [],
        row: []
    }

    FILE_PATHS.EEG_FILES_LIST.forEach(file =&gt; {
        let type = undefined;

        // Determine the type of EEG file based on its name
        if (file.includes(&apos;facial&apos;)) {
            type = &quot;expression&quot;;
        } else if (file.includes(&apos;performance&apos;)) {
            type = &quot;performance&quot;;
        } else if (file.includes(&apos;sensors&apos;)) {
            type = &quot;sensors&quot;;
        } else if (file.includes(&apos;row&apos;)) {
            type = &quot;row&quot;;
        }

        let { convertedData, sids } = getJSONLFileContent(file);

        // Collect session IDs and organize data by type
        sessionIDs.push(...sids);
        finalEEGdata[type] = convertedData;
    });

    // Remove duplicate session IDs using a Set
    let unicIds = new Set(sessionIDs);
    finalEEGdata.sessionIds = [...unicIds];

    return finalEEGdata;
}


//Exports
export {
    getAllEEGFilesContent,
    getJSONLFileContent,
    runImageProcessor,
    saveData,
    runSessionFileUpdatingInterval,
    insertDataToFinalFile,
    readJSONFile,
    extractTimestamp,
    getTheHash,
    writeJSONFile
}</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
